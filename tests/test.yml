---
- hosts: localhost
  vars:
    email: noreply@example.com
    nginx_sites:
      sirbot:
        domains:
          - sirbot.pyslackers.com
        locations:
          - location: /websocket
            websocket: true
            proxy_pass: http://127.0.0.1:5000
          - location: /custom
            custom: |
              proxy_set_header X-Hello-World hello;
            proxy_pass: http://127.0.0.1:5001
          - location: /static
            static: /var/www/my_app/static/
          - location: /
            proxy_pass: http://127.0.0.1:5000
      pyslackers:
        domains:
          - pyslackers.com
        template: pyslackers.j2
  roles:
    - ansible-role-nginx
